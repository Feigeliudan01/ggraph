<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Layouts • ggraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Layouts">
<meta property="og:description" content="">
<meta property="og:image" content="https://ggraph.data-imaginist.com/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Layouts.html">Layouts</a>
    </li>
    <li>
      <a href="../articles/Nodes.html">Nodes</a>
    </li>
    <li>
      <a href="../articles/Edges.html">Edges</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tidygraph.html">Tidygraph interface</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2017/announcing-ggraph/">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/thomasp85/ggraph">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Layouts</h1>
                        <h4 class="author">Thomas Lin Pedersen</h4>
            
            <h4 class="date">2019-08-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/thomasp85/ggraph/blob/master/vignettes/Layouts.Rmd"><code>vignettes/Layouts.Rmd</code></a></small>
      <div class="hidden name"><code>Layouts.Rmd</code></div>

    </div>

    
    
<p>In very short terms, a layout is the vertical and horizontal placement of nodes when plotting a particular graph structure. Conversely, a layout algorithm is an algorithm that takes in a graph structure (and potentially some additional parameters) and return the vertical and horizontal position of the nodes. Often, when people think of network visualizations, they think of node-edge diagrams where strongly connected nodes are attempted to be plotted in close proximity. Layouts can be a lot of other things too though — e.g. hive plots and treemaps. One of the driving factors behind <code>ggraph</code> has been to develop an API where any type of visual representation of graph structures is supported. In order to achieve this we first need a flexible way of defining the layout…</p>
<div id="ggraph-and-create_layout" class="section level2">
<h2 class="hasAnchor">
<a href="#ggraph-and-create_layout" class="anchor"></a><code><a href="../reference/ggraph.html">ggraph()</a></code> and <code><a href="../reference/ggraph.html">create_layout()</a></code>
</h2>
<p>As the layout is a global specification of the spatial position of the nodes it spans all layers in the plot and should thus be defined outside of calls to geoms or stats. In <code>ggraph</code> it is often done as part of the plot initialization using <code><a href="../reference/ggraph.html">ggraph()</a></code> — a function equivalent in intent to <code>ggplot()</code>. As a minimum <code><a href="../reference/ggraph.html">ggraph()</a></code> must be passed a graph object supported by <code>ggraph</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggraph)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidygraph)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="../reference/theme_graph.html">set_graph_style</a></span>(<span class="dt">plot_margin =</span> <span class="kw">margin</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">graph &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/tbl_graph">as_tbl_graph</a></span>(highschool)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># Not specifying the layout - defaults to "auto"</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
<p>Not specifying a layout will make <code>ggraph</code> pick one for you. This is only intended to get quickly up and running. The choice of layout should be deliberate on the part of the user as it will have a great effect on what the end result will communicate. From now on all calls to <code><a href="../reference/ggraph.html">ggraph()</a></code> will contain a specification of the layout:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="dt">layout =</span> <span class="st">'kk'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>If the layout algorithm accepts additional parameters (most do), they can be supplied in the call to <code><a href="../reference/ggraph.html">ggraph()</a></code> as well:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="dt">layout =</span> <span class="st">'kk'</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>If any layout parameters refers to node or edge variables they must be supplied as unquoted expression (like inside <code>aes()</code> and <code>tidyverse</code> verbs)</p>
<p>In addition to specifying the layout during plot creation it can also happen separately using <code><a href="../reference/ggraph.html">create_layout()</a></code>. This function takes the same arguments as <code><a href="../reference/ggraph.html">ggraph()</a></code> but returns a <code>layout_ggraph</code> object that can later be used in place of a graph structure in ggraph call:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">layout &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggraph.html">create_layout</a></span>(graph, <span class="dt">layout =</span> <span class="st">'drl'</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(layout) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Examining the return of <code><a href="../reference/ggraph.html">create_layout()</a></code> we see that it is really just a <code>data.frame</code> of node positions and (possible) attributes. Furthermore the original graph object along with other relevant information is passed along as attributes:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(layout)</a></code></pre></div>
<pre><code>##          x        y name .ggraph.orig_index circular .ggraph.index
## 1 2.573250 12.19917    1                  1    FALSE             1
## 2 2.577951 10.62719    2                  2    FALSE             2
## 3 3.872419 10.47665    3                  3    FALSE             3
## 4 3.609594 12.80267    4                  4    FALSE             4
## 5 3.163328 12.39628    5                  5    FALSE             5
## 6 2.470369 11.75854    6                  6    FALSE             6</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attributes">attributes</a></span>(layout)</a></code></pre></div>
<pre><code>## $names
## [1] "x"                  "y"                  "name"              
## [4] ".ggraph.orig_index" "circular"           ".ggraph.index"     
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
## [24] 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46
## [47] 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69
## [70] 70
## 
## $graph
## # A tbl_graph: 70 nodes and 506 edges
## #
## # A directed multigraph with 1 component
## #
## # Edge Data: 506 x 4 (active)
##    from    to  year direction
##   &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;    
## 1     1    13  1957 left     
## 2     1    14  1957 left     
## 3     1    20  1957 right    
## 4     1    52  1957 right    
## 5     1    53  1957 left     
## 6     2    20  1957 right    
## # … with 500 more rows
## #
## # Node Data: 70 x 2
##   name  .ggraph.orig_index
##   &lt;chr&gt;              &lt;int&gt;
## 1 1                      1
## 2 2                      2
## 3 3                      3
## # … with 67 more rows
## 
## $class
## [1] "layout_tbl_graph" "layout_ggraph"    "data.frame"      
## 
## $circular
## [1] FALSE</code></pre>
<p>As it is just a <code>data.frame</code> it means that any standard <code>ggplot2</code> call will work by addressing the nodes. Still, use of the <code>geom_node_*()</code> family provided by <code>ggraph</code> is encouraged as it makes it explicit which part of the data structure is being worked with.</p>
</div>
<div id="adding-support-for-new-data-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-support-for-new-data-sources" class="anchor"></a>Adding support for new data sources</h2>
<p>Out of the box <code>ggraph</code> supports <code>dendrogram</code> and <code>igraph</code> objects natively as well as <code>hclust</code> and <code>network</code> through conversion to one of the above. If there is wish for support for additional classes this can be achieved by adding a set of specific methods to the class. The <code>ggraph</code> source code should be your guide in this but I will briefly describe the methods below:</p>
<div id="create_layout-myclass" class="section level3">
<h3 class="hasAnchor">
<a href="#create_layout-myclass" class="anchor"></a><code>create_layout.myclass()</code>
</h3>
<p>This method is responsible for taking a graph structure and returning a <code>layout_ggraph</code> object. The object is just a <code>data.frame</code> with the correct class and attributes added. The class should be <code><a href="https://www.rdocumentation.org/packages/base/topics/c">c('layout_myclass', 'layout_ggraph', 'data.frame')</a></code> and it should at least have a <code>graph</code> attribute holding the original graph object as well as a <code>circular</code> attribute with a logical giving whether the layout has been transformed to a circular representation or not. If the graph structure contains any additional information about the nodes this should be added to the <code>data.frame</code> as columns so these are accessible during plotting.</p>
</div>
<div id="getedges-layout_myclass" class="section level3">
<h3 class="hasAnchor">
<a href="#getedges-layout_myclass" class="anchor"></a><code>getEdges.layout_myclass()</code>
</h3>
<p>This method takes the return value of <code>create_layout.myclass()</code> and returns the edges of the graph structure. The return value should be in the form of an edge list with a <code>to</code> and <code>from</code> column giving the indexes of the terminal nodes of the edge. Furthermore, it must contain a <code>circular</code> column, again indicating whether the layout should be considered circular. If there are any additional data attached to the edges in the graph structure these should be added as columns to the <code>data.frame</code>.</p>
</div>
<div id="getconnection-layout_myclass" class="section level3">
<h3 class="hasAnchor">
<a href="#getconnection-layout_myclass" class="anchor"></a><code>getConnection.layout_myclass()</code>
</h3>
<p>This method is intended to return the shortest path between two nodes as a list of node indexes. This method can be ignored but will result in lack of support for <code>geom_conn_*</code> layers.</p>
</div>
<div id="layout_myclass_" class="section level3">
<h3 class="hasAnchor">
<a href="#layout_myclass_" class="anchor"></a><code>layout_myclass_*()</code>
</h3>
<p>Any type of layout algorithm that needs to be available to this class should be defined as a separate <code>layout_myclass_layoutname()</code> function. This function will be called when <code>'layoutname'</code> is used in the <code>layout</code> argument in <code><a href="../reference/ggraph.html">ggraph()</a></code> or <code><a href="../reference/ggraph.html">create_layout()</a></code>. At a minimum each new class should have a <code>layout_myclass_auto()</code> defined.</p>
</div>
</div>
<div id="layouts-abound" class="section level2">
<h2 class="hasAnchor">
<a href="#layouts-abound" class="anchor"></a>Layouts abound</h2>
<p>There’s a lot of different layouts in <code>ggraph</code> — first and foremost because <code>igraph</code> implements a lot of layouts for drawing node-edge diagrams and all of these are available in <code>ggraph</code>. Additionally, <code>ggraph</code> provides a lot of new layout types and algorithms for your drawing pleasure.</p>
<div id="a-note-on-circularity" class="section level3">
<h3 class="hasAnchor">
<a href="#a-note-on-circularity" class="anchor"></a>A note on circularity</h3>
<p>Some layouts can be shown effectively both in a standard Cartesian projection as well as in a polar projection. The standard approach in <code>ggplot2</code> has been to change the coordinate system with the addition of e.g. <code>coord_polar()</code>. This approach — while consistent with the grammar — is not optimal for <code>ggraph</code> as it does not allow layers to decide how to respond to circularity. The prime example of this is trying to draw straight lines in a plot using <code>coord_polar()</code>. Instead circularity is part of the layout specification and gets communicated to the layers with the <code>circular</code> column in the data, allowing each layer to respond appropriately. Sometimes standard and circular representations of the same layout get used so often that they get different names. In <code>ggraph</code> they’ll have the same name and only differ in whether or not <code>circular</code> is set to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># An arc diagram</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="dt">layout =</span> <span class="st">'linear'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year)))</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># A coord diagram</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="dt">layout =</span> <span class="st">'linear'</span>, <span class="dt">circular =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_arc.html">geom_edge_arc</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">graph &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/tbl_graph">tbl_graph</a></span>(flare<span class="op">$</span>vertices, flare<span class="op">$</span>edges)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># An icicle plot</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'partition'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_tile.html">geom_node_tile</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> depth), <span class="dt">size =</span> <span class="fl">0.25</span>)</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># A sunburst plot</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'partition'</span>, <span class="dt">circular =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_arc_bar.html">geom_node_arc_bar</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> depth), <span class="dt">size =</span> <span class="fl">0.25</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Not every layout has a meaningful circular representation in which cases the <code>circular</code> argument will be ignored.</p>
</div>
<div id="node-edge-diagram-layouts" class="section level3">
<h3 class="hasAnchor">
<a href="#node-edge-diagram-layouts" class="anchor"></a>Node-edge diagram layouts</h3>
<p><code>igraph</code> provides a total of 13 different layout algorithms for classic node-edge diagrams (colloquially referred to as hairballs). Some of these are incredibly simple such as <em>randomly</em>, <em>grid</em>, <em>circle</em>, and <em>star</em>, while others tries to optimize the position of nodes based on different characteristics of the graph. There is no such thing as “the best layout algorithm” as algorithms have been optimized for different scenarios. Experiment with the choices at hand and remember to take the end result with a grain of salt, as it is just one of a range of possible “optimal node position” results. Below is a sample of some of the layouts available through <code>igraph</code> applied to the highschool graph.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">graph &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/tbl_graph">as_tbl_graph</a></span>(highschool) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/reexports">mutate</a></span>(<span class="dt">degree =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/centrality">centrality_degree</a></span>())</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'fr'</span>, <span class="st">'kk'</span>, <span class="st">'lgl'</span>, <span class="st">'graphopt'</span>), <span class="cf">function</span>(layout) {</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  <span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="dt">layout =</span> layout) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">    </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year)), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">    </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">caption =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">'Layout: '</span>, layout))</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">})</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-11-1.png" width="700"><img src="Layouts_files/figure-html/unnamed-chunk-11-2.png" width="700"><img src="Layouts_files/figure-html/unnamed-chunk-11-3.png" width="700"><img src="Layouts_files/figure-html/unnamed-chunk-11-4.png" width="700"></p>
</div>
<div id="hive-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#hive-plots" class="anchor"></a>Hive plots</h3>
<p>A hive plot, while still technically a node-edge diagram, is a bit different from the rest as it uses information pertaining to the nodes, rather than the connection information in the graph. This means that hive plots, to a certain extent are more interpretable as well as less vulnerable to small changes in the graph structure. They are less common though, so use will often require some additional explanation.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">graph &lt;-<span class="st"> </span>graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/reexports">mutate</a></span>(<span class="dt">friends =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">    <span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/centrality">centrality_degree</a></span>(<span class="dt">mode =</span> <span class="st">'in'</span>) <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>, <span class="st">'few'</span>,</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/centrality">centrality_degree</a></span>(<span class="dt">mode =</span> <span class="st">'in'</span>) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="st">'many'</span>, <span class="st">'medium'</span>)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  ))</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'hive'</span>, <span class="dt">axis =</span> friends, <span class="dt">sort.by =</span> degree) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_hive.html">geom_edge_hive</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(year))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_axis_hive.html">geom_axis_hive</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> friends), <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">label =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="hierarchical-layouts" class="section level3">
<h3 class="hasAnchor">
<a href="#hierarchical-layouts" class="anchor"></a>Hierarchical layouts</h3>
<p>Trees and hierarchies are an important subset of graph structures, and <code>ggraph</code> provides a range of layouts optimized for their visual representation. Some of these use enclosure and position rather than edges to communicate relations (e.g. treemaps and circle packing). Still, these layouts can just as well be used for drawing edges if you wish to:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">graph &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/tbl_graph">tbl_graph</a></span>(flare<span class="op">$</span>vertices, flare<span class="op">$</span>edges)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'circlepack'</span>, <span class="dt">weight =</span> size) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_circle.html">geom_node_circle</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> depth), <span class="dt">size =</span> <span class="fl">0.25</span>, <span class="dt">n =</span> <span class="dv">50</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'circlepack'</span>, <span class="dt">weight =</span> size) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> depth)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'treemap'</span>, <span class="dt">weight =</span> size) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_tile.html">geom_node_tile</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> depth), <span class="dt">size =</span> <span class="fl">0.25</span>)</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'treemap'</span>, <span class="dt">weight =</span> size) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_link.html">geom_edge_link</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_node_point.html">geom_node_point</a></span>(<span class="kw">aes</span>(<span class="dt">colour =</span> depth))</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>The most recognized tree plot is probably dendrograms though. If nothing else is stated the height of each node is calculated based on the distance to its farthest sibling (the tree layout, on the other hand, puts all nodes at a certain depth at the same level):</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(graph, <span class="st">'dendrogram'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_diagonal.html">geom_edge_diagonal</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>The height of each branch point can be set to a variable — e.g. the height provided by hclust and dendrogram objects:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">dendrogram &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/hclust">hclust</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/dist">dist</a></span>(iris[, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]))</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(dendrogram, <span class="st">'dendrogram'</span>, <span class="dt">height =</span> height) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_elbow.html">geom_edge_elbow</a></span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>Dendrograms are one of the layouts that are amenable for circular transformations, which can be effective in giving more space at the leafs of the tree at the expense of the space given to the root:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="../reference/ggraph.html">ggraph</a></span>(dendrogram, <span class="st">'dendrogram'</span>, <span class="dt">circular =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/geom_edge_elbow.html">geom_edge_elbow</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw">coord_fixed</span>()</a></code></pre></div>
<p><img src="Layouts_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
</div>
<div id="want-more" class="section level2">
<h2 class="hasAnchor">
<a href="#want-more" class="anchor"></a>Want more?</h2>
<p>Check out the other vignettes for more information on how to draw <a href="Nodes.html">nodes</a> and <a href="Edges.html">edges</a>…</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#ggraph-and-create_layout"><code><a href="--/reference/ggraph-html">ggraph()</a></code> and <code><a href="--/reference/ggraph-html">create_layout()</a></code></a></li>
      <li><a href="#adding-support-for-new-data-sources">Adding support for new data sources</a></li>
      <li><a href="#layouts-abound">Layouts abound</a></li>
      <li><a href="#want-more">Want more?</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://data-imaginist.com">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
